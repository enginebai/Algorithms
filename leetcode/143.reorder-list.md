## [143. Reorder List](https://leetcode.com/problems/reorder-list/)

```kotlin
fun reorderList(head: ListNode?): Unit {
    if (head == null || head?.next == null) return
    val middle = middle(head)
    val reverseMiddleHead = reverse(middle)
    
    var node1: ListNode? = head
    var node2: ListNode? = reversedHead

    while (node1 != null && node2 != null) {
        val next1 = node1.next
        var next2 = node2.next

        node1.next = node2
        node2.next = next1

        node1 = next1
        node2 = next2
    }

    // Merge the remaining part
    if (node2 != null) node1?.next = node2
}

// This function actually finds the next node of middle node.
// 1 -> 2 -> 3 -> 4, returns 3
// 1 -> 2 -> 3 -> 4 -> 5, returns 4
private fun middle(head: ListNode?): ListNode? {
    var previous: ListNode? = null
    var slow: ListNode? = head
    var fast: ListNode? = head
    while (fast != null && fast?.next != null) {
        previous = slow
        slow = slow?.next
        fast = fast?.next?.next
    }
    // Disconnect with middle node (see below)
    // 1 -> 2
    // 4 -> 3
    // or
    // 1 -> 2
    // 5 -> 4 -> 3
    previous?.next = null
    return slow
}

private fun reverse(head: ListNode?): ListNode? {
    var previous: ListNode? = null
    var current: ListNode? = head
    while (current != null) {
        val next = current.next
        current.next = previous
        previous = current
        current = next
    }
    return previous
}

// It works, but we have simpler way to merge.
private fun merge(l1: ListNode?, l2: ListNode?) {
    var i = 2
    var result: ListNode? = l1
    var n1: ListNode? = l1?.next
    var n2: ListNode? = l2
    while (n1 != null && n2 != null) {
        if (i % 2 == 0) {
            result?.next = n2
            n2 = n2?.next
        } else {
            result?.next = n1
            n1 = n1?.next
        }
        result = result?.next
        i++
    }
    if (n1 != null) result?.next = n1 else result?.next = n2
}
```

We will have duplicate node when reversing the list from the middle, so make sure to disconnect that node.

```js
// 3 is duplicate
1 -> 2 -> 3 -> X
4 -> 3 -> X

// 3 is duplicate
1 -> 2 -> 3 -> X 
5 -> 4 -> 3 -> X
```