## [450. Delete Node in a BST](https://leetcode.com/problems/delete-node-in-a-bst/)

### My Solution
```kotlin
/**
 * Example:
 * var ti = TreeNode(5)
 * var v = ti.`val`
 * Definition for a binary tree node.
 * class TreeNode(var `val`: Int) {
 *     var left: TreeNode? = null
 *     var right: TreeNode? = null
 * }
 */
class Solution {
    
    private var parent: TreeNode? = null
    
    fun deleteNode(root: TreeNode?, key: Int): TreeNode? {
        if (root == null) return null
        
        val nodeToDelete = search(root, key)
        if (nodeToDelete == null) return root
        
        // Single node and we're going to delete that node
        // [5]
        //  5
        if (nodeToDelete == root && root.left == null && root.right == null) return null
        
        // [1,nul,2]
        //  1
        if (nodeToDelete == root && (root.left == null || root.right == null)) {
            if (root.left != null) return root.left!!
            else return root.right!!
        }
        
        performDelete(nodeToDelete)
                
        return root
    }
    
    private fun performDelete(nodeToDelete: TreeNode) {
        if (nodeToDelete.left == null && nodeToDelete.right == null) {
            if (parent?.left?.`val` == nodeToDelete.`val`) parent?.left = null
            else if (parent?.right?.`val` == nodeToDelete.`val`) parent?.right = null
        } else if (nodeToDelete.left == null || nodeToDelete.right == null) {
            val child = if (nodeToDelete.left != null) nodeToDelete.left else nodeToDelete.right
            
            if (parent?.left?.`val` == nodeToDelete.`val`) parent?.left = child 
            else if (parent?.right?.`val` == nodeToDelete.`val`) parent?.right = child 
            
        } else {
            var node: TreeNode = nodeToDelete
            var successor: TreeNode? = successor(node)
            while (successor != null) {
                val temp = node.`val`
                node.`val` = successor!!.`val`
                successor!!.`val` = temp
                
                node = successor
                successor = successor(node)
            }
            performDelete(node)
        }
    }
    
    private fun successor(root: TreeNode?): TreeNode? {
        if (root?.right != null) {
            parent = root
            var n: TreeNode? = root.right!!
            while (n?.left != null) {
                parent = n
                n = n.left
            }
            return n
        } else return null
    }
    
    private fun search(root: TreeNode?, key: Int): TreeNode? {
        if (root == null) return null
        if (root.`val` == key) return root
        else if (root.`val` < key) {
            parent = root
            return search(root.right, key)
        } else {
            parent = root
            return search(root.left, key)
        }
    }
}
```

### Test Cases
```js
[50,30,70,null,40,60,80]
30 

[50,30,70,null,40,60,80]
50

[1,null,2]
1

[5]
5

[5]
3
```