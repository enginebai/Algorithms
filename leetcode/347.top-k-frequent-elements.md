## [347. Top K Frequent Elements](https://leetcode.com/problems/top-k-frequent-elements/)

### Heap
* We use min heap, iterate all frequency entry, pop if the heap size > `k`, the final result of heap will be the result (in reversed order).

```kotlin
fun topKFrequent(nums: IntArray, k: Int): IntArray {
    if (nums.size == 1) return nums
    // Value and it frequency
    val frequencyMap = hashMapOf<Int, Int>()
    for (i in 0 until nums.size) {
        if (frequencyMap.containsKey(nums[i])) {
            frequencyMap[nums[i]] = frequencyMap[nums[i]]!! + 1
        } else {
            frequencyMap[nums[i]] = 1
        }
    }

    val minHeap = PriorityQueue<Map.Entry<Int, Int>>() { e1, e2 ->
        e1.value - e2.value
    }
    frequencyMap.forEach {
        minHeap.add(it)
        if (minHeap.size > k) {
            minHeap.poll()
        }
    }
    val results = IntArray(k)
    var index = k - 1
    while (index >= 0) {
        results[index] = minHeap.poll()!!.key
        index--
    }
    return results
}
```

* **Time Complexity**: `O(n lg k)`, we iterate `n` items, and `add()` / `poll()` takes `O(lg k)` time, total takes `O(n lg k)` time.
* **Space Complexity**: `O(n) + O(k)` for hash table and heap respectively, total takes `O(n)` time.

### Bucket Sort
```kotlin
fun topKFrequent(nums: IntArray, k: Int): IntArray {
    val results = mutableListOf<Int>()
    // Value and its frequency
    // (1, 3)
    // (2, 2)
    // (3, 3)
    // (4, 1)
    val frequencyMap = hashMapOf<Int, Int>()
    for (i in 0 until nums.size) {
        val value = nums[i]
        if (frequencyMap.containsKey(value)) {
            frequencyMap[value] = frequencyMap[value]!! + 1
        } else {
            frequencyMap[value] = 1
        }
    }

    // We use frequency as index, and store its values of that frequency
    // bucketList[0] = []
    // bucketList[1] = [4]
    // bucketList[2] = [2]
    // bucketList[3] = [1, 3]
    // bucketList[4] = []
    // Plus 1 for zero frequency
    val bucketList = MutableList<MutableList<Int>>(nums.size + 1) { _ -> mutableListOf() }
    for (entry in frequencyMap) {
        val value = entry.key
        val frequency = entry.value
        bucketList.get(frequency).add(value)
    }
    for (i in bucketList.size - 1 downTo 0) {
        if (bucketList.getOrNull(i) == null) continue
        else {
            results.addAll(bucketList.get(i))
            if (results.size >= k) break
        }
    }
    return results.toIntArray()
}
```